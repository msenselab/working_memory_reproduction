"0","# function to run models on  lrz cluster parallely"
"0","runModelparallely<- function(AllExpData){"
"0","  expList <- unique(AllExpData$Exp)"
"0","  subList <- unique(AllExpData$NSub)"
"0","  for (expName in expList) {"
"0","    sub_exp_dat <- list()"
"0","    data_exp <- AllExpData %>% dplyr::filter(Exp == expName)"
"0","    data_exp$model <- expName"
"0","    sub_exp <-  split(data_exp, data_exp$NSub) # split data for each subject"
"0","    for (subNo in subList) {"
"0","      sub_exp_dat <- list.append(sub_exp_dat, sub_exp[[subNo]])"
"0","    }"
"0","    rlt <- runModelcluster(sub_exp_dat)"
"0","    saveRDS(rlt, file = paste0(getwd(), ""/analysis/"", modelPath, ""/rlt/rlt_"", expName,"".rds""))"
"0","  }"
"0","}"
